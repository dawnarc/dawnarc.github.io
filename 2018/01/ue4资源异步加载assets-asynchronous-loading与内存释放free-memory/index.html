

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.42.1 with theme Tranquilpeak 0.4.3-BETA">
    <title>[UE4]资源异步加载(Assets Asynchronous Loading)与内存释放(Free Memory)</title>
    <meta name="author" content="Neil Wang">
    <meta name="keywords" content="UE4, Asset Asynchronous Loading">

    <link rel="icon" href="https://dawnarc.com/favicon.png">
    

    
    <meta name="description" content="为什么需要异步加载资源，因为当一次性加载的资源较多或者单个资源较大时，普通的LoadObject()方式会阻塞引擎的主线程。
假设测试工程叫TestTD4，自定义Character叫ATestTD4Character（头文件为TestTD4Character.h）
假设在Content/Assets/目录下放了三个动画文件（AnimSequence）。
异步加载 通过DefaultGame.ini配置文件生成FSoftObjectPath DefaultGame.ini
[/Script/TestTD4.TestTD4Character] &#43;TestAssets=/Game/Assets/ThirdPerson_Jump.ThirdPerson_Jump &#43;TestAssets=/Game/Assets/ThirdPersonRun.ThirdPersonRun &#43;TestAssets=/Game/Assets/ThirdPersonWalk.ThirdPersonWalk  TestTD4Character.h
UPROPERTY(Config) TArray&lt;FSoftObjectPath&gt; TestAssets;  这个属性的意思是：加Config标签表示从DefaultGame.ini读取，TestAssets就是DefaultGame.ini中配置的属性名，当游戏启动时，这个数组会被自动填充3个元素，即资源的路径。
注：4.18版本中FStringAssetReference、TAssetPtr两个变量被重命名为：FSoftObjectPath、TSoftObjectPtr.
 TestTD4Character.cpp
void ATestTD4Character::BeginPlay() { Super::BeginPlay(); for (FSoftObjectPath&amp; Asset : TestAssets) { GEngine-&gt;AddOnScreenDebugMessage(-1, 3, FColor::Cyan, Asset.ToString()); } FStreamableManager&amp; AssetLoader = UAssetManager::GetStreamableManager(); AssetLoader.RequestAsyncLoad(TestAssets, FStreamableDelegate::CreateUObject(this, &amp;ATestTD4Character::AnimAssetsDeferred)); } void ATestTD4Character::AnimAssetsDeferred() { for (FSoftObjectPath SoftObj : TestAssets) { TAssetPtr&lt;UAnimSequence&gt; AnimAsset(SoftObj); UAnimSequence* AnimObj = AnimAsset.Get(); if (AnimObj) { GEngine-&gt;AddOnScreenDebugMessage(-1, 3, FColor::Red, AnimObj-&gt;GetName()); } } }  打印结果：">
    <meta property="og:description" content="为什么需要异步加载资源，因为当一次性加载的资源较多或者单个资源较大时，普通的LoadObject()方式会阻塞引擎的主线程。
假设测试工程叫TestTD4，自定义Character叫ATestTD4Character（头文件为TestTD4Character.h）
假设在Content/Assets/目录下放了三个动画文件（AnimSequence）。
异步加载 通过DefaultGame.ini配置文件生成FSoftObjectPath DefaultGame.ini
[/Script/TestTD4.TestTD4Character] &#43;TestAssets=/Game/Assets/ThirdPerson_Jump.ThirdPerson_Jump &#43;TestAssets=/Game/Assets/ThirdPersonRun.ThirdPersonRun &#43;TestAssets=/Game/Assets/ThirdPersonWalk.ThirdPersonWalk  TestTD4Character.h
UPROPERTY(Config) TArray&lt;FSoftObjectPath&gt; TestAssets;  这个属性的意思是：加Config标签表示从DefaultGame.ini读取，TestAssets就是DefaultGame.ini中配置的属性名，当游戏启动时，这个数组会被自动填充3个元素，即资源的路径。
注：4.18版本中FStringAssetReference、TAssetPtr两个变量被重命名为：FSoftObjectPath、TSoftObjectPtr.
 TestTD4Character.cpp
void ATestTD4Character::BeginPlay() { Super::BeginPlay(); for (FSoftObjectPath&amp; Asset : TestAssets) { GEngine-&gt;AddOnScreenDebugMessage(-1, 3, FColor::Cyan, Asset.ToString()); } FStreamableManager&amp; AssetLoader = UAssetManager::GetStreamableManager(); AssetLoader.RequestAsyncLoad(TestAssets, FStreamableDelegate::CreateUObject(this, &amp;ATestTD4Character::AnimAssetsDeferred)); } void ATestTD4Character::AnimAssetsDeferred() { for (FSoftObjectPath SoftObj : TestAssets) { TAssetPtr&lt;UAnimSequence&gt; AnimAsset(SoftObj); UAnimSequence* AnimObj = AnimAsset.Get(); if (AnimObj) { GEngine-&gt;AddOnScreenDebugMessage(-1, 3, FColor::Red, AnimObj-&gt;GetName()); } } }  打印结果：">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="[UE4]资源异步加载(Assets Asynchronous Loading)与内存释放(Free Memory)">
    <meta property="og:url" content="/2018/01/ue4%E8%B5%84%E6%BA%90%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BDassets-asynchronous-loading%E4%B8%8E%E5%86%85%E5%AD%98%E9%87%8A%E6%94%BEfree-memory/">
    <meta property="og:site_name" content="玄冬Wong">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="玄冬Wong">
    <meta name="twitter:description" content="为什么需要异步加载资源，因为当一次性加载的资源较多或者单个资源较大时，普通的LoadObject()方式会阻塞引擎的主线程。
假设测试工程叫TestTD4，自定义Character叫ATestTD4Character（头文件为TestTD4Character.h）
假设在Content/Assets/目录下放了三个动画文件（AnimSequence）。
异步加载 通过DefaultGame.ini配置文件生成FSoftObjectPath DefaultGame.ini
[/Script/TestTD4.TestTD4Character] &#43;TestAssets=/Game/Assets/ThirdPerson_Jump.ThirdPerson_Jump &#43;TestAssets=/Game/Assets/ThirdPersonRun.ThirdPersonRun &#43;TestAssets=/Game/Assets/ThirdPersonWalk.ThirdPersonWalk  TestTD4Character.h
UPROPERTY(Config) TArray&lt;FSoftObjectPath&gt; TestAssets;  这个属性的意思是：加Config标签表示从DefaultGame.ini读取，TestAssets就是DefaultGame.ini中配置的属性名，当游戏启动时，这个数组会被自动填充3个元素，即资源的路径。
注：4.18版本中FStringAssetReference、TAssetPtr两个变量被重命名为：FSoftObjectPath、TSoftObjectPtr.
 TestTD4Character.cpp
void ATestTD4Character::BeginPlay() { Super::BeginPlay(); for (FSoftObjectPath&amp; Asset : TestAssets) { GEngine-&gt;AddOnScreenDebugMessage(-1, 3, FColor::Cyan, Asset.ToString()); } FStreamableManager&amp; AssetLoader = UAssetManager::GetStreamableManager(); AssetLoader.RequestAsyncLoad(TestAssets, FStreamableDelegate::CreateUObject(this, &amp;ATestTD4Character::AnimAssetsDeferred)); } void ATestTD4Character::AnimAssetsDeferred() { for (FSoftObjectPath SoftObj : TestAssets) { TAssetPtr&lt;UAnimSequence&gt; AnimAsset(SoftObj); UAnimSequence* AnimObj = AnimAsset.Get(); if (AnimObj) { GEngine-&gt;AddOnScreenDebugMessage(-1, 3, FColor::Red, AnimObj-&gt;GetName()); } } }  打印结果：">
    
      <meta name="twitter:creator" content="@idealsland">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/0df91cdac5811a56ca485b0449d91b5e?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://dawnarc.com/css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css">
      
    

    
      
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-78064851-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://dawnarc.com/">玄冬Wong</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://dawnarc.com/#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/0df91cdac5811a56ca485b0449d91b5e?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
  
  

</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://dawnarc.com/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/0df91cdac5811a56ca485b0449d91b5e?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Neil Wang</h4>
        
          <h5 class="sidebar-profile-bio">久长唯有品格</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://stackoverflow.com/users/1645289/protoss" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
      
      <span class="sidebar-button-desc">Stack Overflow</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.artstation.com/artist/dawnarc" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-artstation"></i>
      
      <span class="sidebar-button-desc">ArtStation</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.facebook.com/koanland" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-facebook"></i>
      
      <span class="sidebar-button-desc">Facebook</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/dawnarc" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/dawnarc/" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">Linkedin</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.pinterest.com/wangaiguo/" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-pinterest"></i>
      
      <span class="sidebar-button-desc">Pinterest</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://steamcommunity.com/id/dawnarc" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-steam"></i>
      
      <span class="sidebar-button-desc">Steam</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/idealsland" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://weibo.com/koanland" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-weibo"></i>
      
      <span class="sidebar-button-desc">Weibo</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      [UE4]资源异步加载(Assets Asynchronous Loading)与内存释放(Free Memory)
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2018-01-26T00:42:40&#43;08:00">
        
  January 26, 2018

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://dawnarc.com/categories/unrealengine4">UnrealEngine4</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              

<p>为什么需要异步加载资源，因为当一次性加载的资源较多或者单个资源较大时，普通的LoadObject()方式会阻塞引擎的主线程。</p>

<p>假设测试工程叫TestTD4，自定义Character叫ATestTD4Character（头文件为TestTD4Character.h）</p>

<p>假设在Content/Assets/目录下放了三个动画文件（AnimSequence）。</p>

<h3 id="异步加载">异步加载</h3>

<h5 id="通过defaultgame-ini配置文件生成fsoftobjectpath">通过DefaultGame.ini配置文件生成FSoftObjectPath</h5>

<p>DefaultGame.ini</p>

<pre><code>[/Script/TestTD4.TestTD4Character]
+TestAssets=/Game/Assets/ThirdPerson_Jump.ThirdPerson_Jump
+TestAssets=/Game/Assets/ThirdPersonRun.ThirdPersonRun
+TestAssets=/Game/Assets/ThirdPersonWalk.ThirdPersonWalk
</code></pre>

<p>TestTD4Character.h</p>

<pre><code>UPROPERTY(Config)
        TArray&lt;FSoftObjectPath&gt; TestAssets;
</code></pre>

<p>这个属性的意思是：加Config标签表示从DefaultGame.ini读取，TestAssets就是DefaultGame.ini中配置的属性名，当游戏启动时，这个数组会被自动填充3个元素，即资源的路径。</p>

<div class="alert warning ">
  <p>注：4.18版本中FStringAssetReference、TAssetPtr两个变量被重命名为：FSoftObjectPath、TSoftObjectPtr.</p>
</div>

<p>TestTD4Character.cpp</p>

<pre><code>void ATestTD4Character::BeginPlay()
{
    Super::BeginPlay();

    for (FSoftObjectPath&amp; Asset : TestAssets)
    {
        GEngine-&gt;AddOnScreenDebugMessage(-1, 3, FColor::Cyan, Asset.ToString());
    }

    FStreamableManager&amp; AssetLoader = UAssetManager::GetStreamableManager();
    AssetLoader.RequestAsyncLoad(TestAssets, FStreamableDelegate::CreateUObject(this, &amp;ATestTD4Character::AnimAssetsDeferred));
}

void ATestTD4Character::AnimAssetsDeferred()
{
    for (FSoftObjectPath SoftObj : TestAssets)
    {
        TAssetPtr&lt;UAnimSequence&gt; AnimAsset(SoftObj);

        UAnimSequence* AnimObj = AnimAsset.Get();
        if (AnimObj)
        {
            GEngine-&gt;AddOnScreenDebugMessage(-1, 3, FColor::Red, AnimObj-&gt;GetName());
        }
    }
}
</code></pre>

<p>打印结果：</p>

<pre><code>ThirdPersonWalk
ThirdPersonRun
ThirdPerson_Jump
/Game/Assets/ThirdPersonWalk.ThirdPersonWalk
/Game/Assets/ThirdPersonRun.ThirdPersonRun
/Game/Assets/ThirdPerson_Jump.ThirdPerson_Jump
</code></pre>

<p>如果注掉RequestAsyncLoad，直接执行AnimAssetsDeferred()，则打印结果为：</p>

<pre><code>/Game/Assets/ThirdPersonWalk.ThirdPersonWalk
/Game/Assets/ThirdPersonRun.ThirdPersonRun
/Game/Assets/ThirdPerson_Jump.ThirdPerson_Jump
</code></pre>

<p>说明这三个资源确实是运行时异步加载，而不是游戏启动时就被自动加载。</p>

<h5 id="通过路径字符串生成fsoftobjectpath">通过路径字符串生成FSoftObjectPath</h5>

<p>头文件中定义一个变量</p>

<pre><code>FSoftObjectPath SoftObj;
</code></pre>

<p>在cpp函数中通过路径赋值（比如在BeginPlay()函数中）</p>

<pre><code>SoftObj = FSoftObjectPath(TEXT(&quot;/Game/Mannequin/Animations/ThirdPersonWalk.ThirdPersonWalk&quot;));
FStreamableManager&amp; AssetLoader = UAssetManager::GetStreamableManager();
AssetLoader.RequestAsyncLoad(SoftObj, FStreamableDelegate::CreateUObject(this, &amp;AUMGTestGameModeBase::AnimAssetsDeferred));
</code></pre>

<p>回调函数中获取对象</p>

<pre><code>void ATestTD4Character::AssetsDeferred()
{
    TSoftObjectPtr&lt;UAnimSequence&gt; WidgetAsset(SoftObj);
    UAnimSequence* AnimObj= WidgetAsset.Get();
    if (AnimObj)
    {
        GEngine-&gt;AddOnScreenDebugMessage(-1, 3, FColor::Red, AnimObj-&gt;GetName());
    }
}
</code></pre>

<h3 id="同步加载">同步加载</h3>

<p>同步加载有两种API：</p>

<ul>
<li><p>FStreamableManager::LoadSynchronous</p>

<pre><code>UAnimSequence* AimObj = AssetLoader.LoadSynchronous&lt;UAnimSequence&gt;(FSoftObjectPath(TEXT(&quot;/Game/Assets/ThirdPerson_Jump.ThirdPerson_Jump&quot;)));
</code></pre></li>

<li><p>FStreamableManager::RequestSyncLoad</p>

<pre><code>TSharedPtr&lt;FStreamableHandle&gt; Handle = AssetLoader.RequestSyncLoad(FSoftObjectPath(TEXT(&quot;/Game/Assets/ThirdPerson_Jump.ThirdPerson_Jump&quot;)));
if (Handle.IsValid())
{
    UAnimSequence* AnimiObj = Cast&lt;UAnimSequence&gt;(Handle-&gt;GetLoadedAsset());
}
</code></pre></li>
</ul>

<div class="alert warning ">
  <p>FStreamableManager的源码注释已经写明：RequestAsyncLoad、RequestSyncLoad、LoadSynchronous等待延迟时间可能长达数秒。LoadSynchronous和RequestSyncLoad的内部实现是对异步加载的封装：调用FStreamableHandle::WaitUntilComplete()阻塞等待。RequestSyncLoad函数内部要么会进行异步载入并且调用WaitUntilComplete函数，要么直接调用LoadObject函数 —— 哪个更快就调哪个。</p>
</div>

<h5 id="加载蓝图-角色蓝图-umg蓝图等">加载蓝图（角色蓝图、UMG蓝图等）</h5>

<p>StreamManager加载蓝图时，不能使用默认路径（即使后缀加_C），否则加载出来的Class无法使用，虽然不为空。<br />
正确方式：前缀统一用Class，然后后缀再加_C。</p>

<p>示例：</p>

<pre><code>FStreamableManager&amp; AssetLoader = UAssetManager::GetStreamableManager();
UClass* WidgetClass = AssetLoader.LoadSynchronous&lt;UClass&gt;(FSoftObjectPath(&quot;Class'/Game/TopDownCPP/Blueprints/NewWidgetBlueprint.NewWidgetBlueprint_C'&quot;));
if (WidgetClass)
{
    UUserWidget* Widget = CreateWidget&lt;UUserWidget&gt;(this, WidgetClass);
    if (Widget)
    {
        Widget-&gt;AddToViewport();
    }
}
</code></pre>

<h3 id="资源内存释放">资源内存释放</h3>

<p>用上述方式加载资源后（包括同步加载和异步加载），如何再释放资源并从内存中销毁？两种情况：</p>

<h5 id="自动回收">自动回收</h5>

<p><code>只要对象失去引用后就会被自动释放，无需手动Destroy。如果是异步加载，对象只在回调函数中有效，回调函数执行完毕后，就会被标记为可收回状态，如果此时ForceGC，则对象会立即销毁。</code></p>

<h5 id="手动回收">手动回收</h5>

<p>在执行加载时，将bManageActiveHandle标记为true，默认为false：表示是否手动管理FStreamableHandle。如果设置为true，则对象会一直常驻内存直到手动释放。</p>

<pre><code>FStreamableManager&amp; AssetLoader = UAssetManager::GetStreamableManager();
UParticleSystem* AimObj = AssetLoader.LoadSynchronous&lt;UParticleSystem&gt;(FSoftObjectPath(AssetPath), true);
</code></pre>

<p>当对象不再需要时，再手动执行执行Unload。之后对象就会被自动回收：</p>

<pre><code>FStreamableManager&amp; AssetLoader = UAssetManager::GetStreamableManager();
AssetLoader.Unload(FSoftObjectPath(AssetPath));
</code></pre>

<p>Unload之后如果需要立即回收，可以执行ForceGC：</p>

<pre><code>GEngine-&gt;ForceGarbageCollection(true);
</code></pre>

<div class="alert danger ">
  <p>在编辑器模式下，上述两种回收方式都不起效，会一直常驻内存，只有在打包运行版本中才会生效。如果在编辑器运行模式下强制Destroy()或者MarkPendingKill()，则对象可以从内存中销毁，但是无法再次Load，除非重启编辑器。</p>
</div>

<h5 id="注意事项">注意事项</h5>

<ul>
<li><p>FStreamableManager::Unload()会Release掉和当前资源相关的所有FStreamableHandle。比如在三处位置加载了同一个资源，即使bManageActiveHandle设置为true，那么只要调用Unload一次，就可以将这三个FStreamableHandle对象全部Release掉，即从内存中释放该对象；如果对这3个FStreamableHandle对象分别执行Release，那么只有当最后一个Handle被Release之后，该资源才会从内存中释放。</p></li>

<li><p>异步加载时，谁先请求则谁的回调函数先执行，不会存在回调函数执行顺序乱序的问题（除非修改TAsyncLoadPriority），因为引擎内部接收回调请求的容器使用的是TArray，且每次执行索引为0的回调，然后RemoveAt(0)。</p></li>

<li><p>异步加载时，如果资源还没加载完成就执行ReleaseHandle()（假设加载时bManageActiveHandle为true），比如在执行回调函数之前执行ReleaseHandle，那么当资源加载完成后（回调函数执行之后），会自动从内存中回收。不过该对象在回调函数中仍然有效，除非在回调函数内ForceGC。</p>

<pre><code>void AMyPlayerController::TestAsyncLoadAndRelease()
{
    FStreamableDelegate Call;
    Call.BindUFunction(this, FName(&quot;AsyncLoadCallback&quot;));

    FStreamableManager&amp; AssetLoader = UAssetManager::GetStreamableManager();
    Handle = AssetLoader.RequestAsyncLoad(FSoftObjectPath(AssetPath), Call, 0, true);
    Handle-&gt;ReleaseHandle();
}
</code></pre></li>

<li><p>UPROPERTY()修饰的成员变量，可以让其保持的资源对象常驻内存，如果不再需要驻留内存，将该成员变量值为NULL，等到下次GC时就会被自动回收</p></li>

<li><p>GEngine-&gt;ForceGarbageCollection();执行后，内存回收至少要等到下一帧才会执行。在当前帧内，即使一个对象执行ConditionalBeginDestroy()且执行了ForceGarbageCollection，当前帧内该对象仍然有效。</p></li>

<li><p>ConditionalBeginDestroy()是所有UObject都有的API，其对象销毁是异步执行且对象在当前帧内持续有效；AActor::Destroy()是AActor特有的API，其对象回收发生在当前帧结束时。</p></li>

<li><p>bManageActiveHandle为true时，即使切换关卡，该资源也不会被销毁，类似AddToRoot()的效果。</p></li>
</ul>

<h5 id="参考">参考</h5>

<p>《Fortnite》开发经验分享之运行时资源管理：Runtime Asset Management<br />
<a href="https://answers.unrealengine.com/storage/temp/136465-runtimeassetmanagementin416.pdf">https://answers.unrealengine.com/storage/temp/136465-runtimeassetmanagementin416.pdf</a></p>

<p>【2018-05-21】<br />
如果在场景A中去加载场景B（SyncLoad或者AsyncLoad，不是UGameplayStatics::OpenLevel方式），那么加载场景B时，bManageActiveHandle参数不能设置为false，而要设置为true。</p>

<p>现象：<br />
如果bManageActiveHandle设置为默认值false，那么当执行OpenLevel切换到场景B时，若此时场景B的内存已经被回收掉，则会导致程序无响应卡死（20秒左右后闪退，但是没有崩溃日志），而且在移动端还会引起各种莫名其妙的问题。</p>

<p>解决办法：<br />
如果场景A中需要Load场景B，bManageActiveHandle设置为true；等到切换到场景B时，再手动ReleaseHandle。</p>

<p>【2018-08-16】<br />
使用TCHAR作为路径名时编译会报错：</p>

<pre><code>FString Path(&quot;/Game/Assets/ThirdPerson_Jump.ThirdPerson_Jump&quot;);
TSoftObjectPtr&lt;UParticleSystem&gt; Asset(FSoftObjectPath(*Path));
</code></pre>

<p>解决办法：<br />
使用 TCHAR_TO_ANSI 转换：</p>

<pre><code>FString Path(&quot;/Game/Assets/ThirdPerson_Jump.ThirdPerson_Jump&quot;);
TSoftObjectPtr&lt;UParticleSystem&gt; Asset(FSoftObjectPath(TCHAR_TO_ANSI(*Path)));
</code></pre>

<hr />

<p><code>如果热爱与希望，背道而驰，那我选择热爱。 ----井上雄彦</code></p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://dawnarc.com/tags/ue4/">UE4</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://dawnarc.com/2018/01/ue4cel-shading%E5%8D%A1%E9%80%9A%E6%B8%B2%E6%9F%93/" data-tooltip="[UE4]Cel Shading(卡通渲染)">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://dawnarc.com/2018/01/macos%E9%80%9A%E8%BF%87-u-%E7%9B%98%E5%90%AF%E5%8A%A8%E9%87%8D%E8%A3%85-macos-%E7%B3%BB%E7%BB%9F/" data-tooltip="[MacOS]通过 U 盘启动重装 macOS 系统">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Neil Wang. All Rights Reserved. Powered by <A href="https://gohugo.io/"> Hugo</A>.
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://dawnarc.com/2018/01/ue4cel-shading%E5%8D%A1%E9%80%9A%E6%B8%B2%E6%9F%93/" data-tooltip="[UE4]Cel Shading(卡通渲染)">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://dawnarc.com/2018/01/macos%E9%80%9A%E8%BF%87-u-%E7%9B%98%E5%90%AF%E5%8A%A8%E9%87%8D%E8%A3%85-macos-%E7%B3%BB%E7%BB%9F/" data-tooltip="[MacOS]通过 U 盘启动重装 macOS 系统">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/0df91cdac5811a56ca485b0449d91b5e?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Neil Wang</h4>
    
      <div id="about-card-bio">久长唯有品格</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        To Be Marvelous
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Yichang·Hubei
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://dawnarc.com/2018/09/shadingtutorials-and-documents-collections/">
                <h3 class="media-heading">[Shading]Tutorials and Documents Collections</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">The complete shader development course(Unity)
https://shaderdev.com/</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://dawnarc.com/2018/09/ue4materials-collections/">
                <h3 class="media-heading">[UE4]Materials Collections</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Creating Interactive Grass in Unreal Engine 4
https://www.raywenderlich.com/6314-creating-interactive-grass-in-unreal-engine-4
Creating Snow Trails in Unreal Engine 4
https://www.raywenderlich.com/5760-creating-snow-trails-in-unreal-engine-4</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://dawnarc.com/2018/09/ue4android-building-error-could-not-resolve-all-files-for-configuration-classpath/">
                <h3 class="media-heading">[UE4]Android Building Error-Could not resolve all files for configuration &#39;classpath&#39;</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Error 1 Error Log:
A problem occurred configuring root project 'app'. &gt; Could not resolve all files for configuration ':classpath'. &gt; Could not download kotlin-reflect.jar (org.jetbrains.kotlin:kotlin-reflect:1.1.3-2) &gt; Could not get resource 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-reflect/1.1.3-2/kotlin-reflect-1.1.3-2.jar'. &gt; Could not GET 'https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-reflect/1.1.3-2/kotlin-reflect-1.1.3-2.jar'. &gt; Software caused connection abort: recv failed &gt; Could not download protobuf-java.jar (com.google.protobuf:protobuf-java:3.0.0) &gt; Could not get resource 'https://jcenter.bintray.com/com/google/protobuf/protobuf-java/3.0.0/protobuf-java-3.0.0.jar'. &gt; Could not GET 'https://jcenter.bintray.com/com/google/protobuf/protobuf-java/3.0.0/protobuf-java-3.0.0.jar'. &gt; Software caused connection abort: recv failed  Solution:</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://dawnarc.com/2018/09/steamworks%E5%90%8E%E5%8F%B0%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3/">
                <h3 class="media-heading">Steamworks后台配置相关</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">如何修改SteamWorks中游戏名称 改名需要改两个地方：一个是Application Name，一个是Package Name。
修改Application Name 先打开SteamWork首页，点击App名称，进入App Admin页面   然后点击“Edit Steamworks Settings”   然后修改Application Name，并点击Save   修改Package Name 先打开SteamWork首页，点击App名称，进入App Admin页面   然后点击Package Title   然后点击Edit package name。   游戏包体构建与上传（SteamPipe Depot &amp; Build） 1，将游戏包体放在E:\SteamSdk\tools\ContentBuilder\content 目录下。一般为了区分windows / mac os，可以在 content 目录下见两个文件夹：windows 和 macos，然后将对应包体文件放在对应文件夹下。
2， 编辑 E:\SteamSdk\tools\ContentBuilder\scripts\ 下的app_build_1000.vdf 和 depot_build_1001.vdf。
将 app_build_1000.vdf 和 depot_build_1001.vdf 改名，分别改成自己项目的 appid 和 depotid，例如： app_build_2000.vdf、depot_build_2001.vdf。
然后修改 app_build_2000.vdf 中的内容，改成正式的 appid 和 depotid   修改 depot_build_2001.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://dawnarc.com/2018/08/ue4modify-post-process-settings-at-run-time/">
                <h3 class="media-heading">[UE4]Modify Post Process Settings At Run-time</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Keywords：运行时期间修改后处理设置, change post process settings when game is running.
运行时修改Post Process 步骤 1，使用 Camera Component 拉出 Set members in PostProcessSettings 节点。 Get reference to Camera Component and drag out “Set members in PostProcessSettings” node.   2，选中 Set members in PostProcessSettings 节点，然后再在 Detail 面板中勾选需要修改的属性。比如我想修改曝光亮度。 select “Set members in PostProcessSettings” node, then checked properties which want to modify in Detail Panel. e.g. Brightness of Exposure.   3，将 Camera 组件的 属性” Post Process Blend Weight” 设置为1，表示完全启用摄像机的 Post Process Settings。0表示完全禁用，0到1的数值表示混合过渡“全完启用”到“完全禁用”之间的渐变效果。 Set “ Post Process Blend Weight” to 1 in Camera Component, which means fully enable Post Process Settings of Camera.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://dawnarc.com/2018/08/mathparabola-movement/">
                <h3 class="media-heading">[Math]Parabola movement</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">keywords：抛物运动、Parabola、重力加速度、Gravitational Speed 、UE4 implement.
header
AStaticMeshActor* TestCube = nullptr; //throw speed UPROPERTY(EditDefaultsOnly) FVector StartForce = FVector(100.f, 100.f, 2000.f); //gravitational acceleration float GravityAcclerator = -980.f; //accumulated movtion time float AccumulateTime = 0.f;  cpp
void ATestTPGameMode::StartPlay() { Super::StartPlay(); //finding the Actor in scene. for (TActorIterator&lt;AStaticMeshActor&gt; Iter(GetWorld()); Iter; ++Iter) { if (Iter-&gt;GetName() == TEXT(&quot;Cube_2&quot;)) { TestCube = *Iter; break; } } } void ATestTPGameMode::Tick(float DeltaSeconds) { Super::Tick(DeltaSeconds); AccumulateTime += DeltaSeconds; //calculate gravitational speed in real time.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://dawnarc.com/2018/08/ue4actor-lifecycle/">
                <h3 class="media-heading">[UE4]Actor Lifecycle</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">EndPlay、BeginDestroy、Destroy 的调用时机  如果要获取 Actor 销毁时的准确时间点，建议重写 Destroy() 函数，而不是EndPlay()、BeginDestroy()。 官方文档上说 EndPlay 会在执行Destroy的时候触发，但实际上并不会（至少4.20版本中测试过不会），而是当 Actor 所在场景销毁时（比如退出编辑器）才会调用。 BeginDestroy()、IsReadyForFinishDestroy()、FinishDestroy() 是在执行垃圾回收时才会触发的函数，而不是对象被 Destroy 后立即执行的函数。  官方文档
https://docs.unrealengine.com/en-us/Programming/UnrealArchitecture/Actors/ActorLifecycle</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://dawnarc.com/2018/08/gitblit%E5%B9%B6%E5%8F%91%E8%AF%B7%E6%B1%82%E6%95%B0%E9%99%90%E5%88%B6%E7%9A%84%E9%97%AE%E9%A2%98concurrent-ssh-connection-limit/">
                <h3 class="media-heading">[gitblit]并发请求数限制的问题(Concurrent SSH connection limit)</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">问题现象：
当同时 pull 或者 push 的人数较多时，只有第一个用户正常，其他用户会卡住。
解决办法：
修改配置文件data/gitblit.properties，添加：
execution.defaultThreadPoolSize = 10  defaultThreadPoolSize 默认为0。
参考自：
Concurrent push not working
https://github.com/gitblit/gitblit/issues/905</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://dawnarc.com/2018/08/github%E8%A7%A3%E5%86%B3github%E4%B8%8B%E8%BD%BD%E9%80%9F%E5%BA%A6%E5%A4%AA%E6%85%A2%E7%9A%84%E9%97%AE%E9%A2%98/">
                <h3 class="media-heading">[github]解决GitHub下载速度太慢的问题</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">以下两步缺一不可
步骤一 从GitHub下载文件一直非常慢，查看下载链接发现最终被指向了Amazon的服务器，下载地址是http://github-cloud.s3.amazonaws.com/，从国内访问Amazon非常慢，所以总是下载失败，解决方法时更改host文件，使该域名指向香港的服务器：
更改hosts文件：
Windows
更改C:\Windows\System32\drivers\etc\hosts文件，在文件中追加219.76.4.4 github-cloud.s3.amazonaws.com, 将域名指向该IP即可
Mac
执行 sudo vi /etc/hosts 追加 219.76.4.4 github-cloud.s3.amazonaws.com
最后执行ipconfig /flushdns命令，刷新 DNS 缓存。
步骤二 https://www.ipaddress.com/ 使用 IP Lookup 工具获得下面这两个github域名的ip地址，该网站可能需要梯子，输入上述域名后，分别获得github.com和github.global.ssl.fastly.net对应的ip，比如 192.30.xx.xx 和 151.101.xx.xx 。准备工作做完之后，打开的hosts文件中添加如下格式，IP修改为自己查询到的IP：
192.30.xx.xx github.com 151.101.xx.xx github.global.ssl.fastly.net  最后执行ipconfig /flushdns命令，刷新 DNS 缓存。修改后的下载速度能达到 2MB/S 以上。
参考自：https://blog.csdn.net/qing666888/article/details/79123742</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://dawnarc.com/2018/07/mathorthogonalize%E6%AD%A3%E4%BA%A4%E5%8C%96/">
                <h3 class="media-heading">[Math]Orthogonalize(正交化)</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">格拉姆-施密特正交化
https://zh.wikipedia.org/wiki/%E6%A0%BC%E6%8B%89%E5%A7%86-%E6%96%BD%E5%AF%86%E7%89%B9%E6%AD%A3%E4%BA%A4%E5%8C%96
内积空间
https://zh.wikipedia.org/wiki/%E5%86%85%E7%A7%AF%E7%A9%BA%E9%97%B4
标准正交基
https://zh.wikipedia.org/wiki/%E6%A0%87%E5%87%86%E6%AD%A3%E4%BA%A4%E5%9F%BA
子空间
https://zh.wikipedia.org/wiki/%E5%AD%90%E7%A9%BA%E9%96%93
豪斯霍尔德变换
https://zh.wikipedia.org/wiki/%E8%B1%AA%E6%96%AF%E9%9C%8D%E5%B0%94%E5%BE%B7%E5%8F%98%E6%8D%A2
吉文斯旋转
https://zh.wikipedia.org/wiki/%E5%90%89%E6%96%87%E6%96%AF%E6%97%8B%E8%BD%AC</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         422 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://dawnarc.com/images/cover-v1.2.0.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://dawnarc.com/js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/dawnarc.com\/2018\/01\/ue4%E8%B5%84%E6%BA%90%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BDassets-asynchronous-loading%E4%B8%8E%E5%86%85%E5%AD%98%E9%87%8A%E6%94%BEfree-memory\/';
          
            this.page.identifier = '\/2018\/01\/ue4%E8%B5%84%E6%BA%90%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BDassets-asynchronous-loading%E4%B8%8E%E5%86%85%E5%AD%98%E9%87%8A%E6%94%BEfree-memory\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'dawnarc';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

