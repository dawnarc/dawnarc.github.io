<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.80.0 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="Neil Wang">
<meta name="keywords" content="">
<meta name="description" content="Editor命令（ShowFlag） 如果想在 Editor 中查看 Actor 蓝图的 Bounds（默认只能在 Static Mesh 编辑窗口中查看），可以使用 ShowFlag 命令（在编辑器窗口中按下波浪键打开输入窗口）。
开启：
ShowFlag.Bounds 1 关闭：
ShowFlag.Bounds 0 凡是 Show 命令能查看的参数，ShowFlag也能查看，包括Collision等。
如果想在游戏运行时查看指定物体的 Bounds，那么可以先执行 ShowFlag.Bounds 1，然后再以 Simulate 模式运行游戏，然后再在场景中单击要查看的物体，然后就可以显示该物体的 Bounds 信息。
 运行时命令 修改Camera Mode（切换摄像机视角）： Camera [modename] 其中modename的值为：
static const FName NAME_Fixed = FName(TEXT(&quot;Fixed&quot;));static const FName NAME_ThirdPerson = FName(TEXT(&quot;ThirdPerson&quot;));static const FName NAME_FreeCam = FName(TEXT(&quot;FreeCam&quot;));static const FName NAME_FreeCam_Default = FName(TEXT(&quot;FreeCam_Default&quot;));static const FName NAME_FirstPerson = FName(TEXT(&quot;FirstPerson&quot;)); 启用debug camera：">


<meta property="og:description" content="Editor命令（ShowFlag） 如果想在 Editor 中查看 Actor 蓝图的 Bounds（默认只能在 Static Mesh 编辑窗口中查看），可以使用 ShowFlag 命令（在编辑器窗口中按下波浪键打开输入窗口）。
开启：
ShowFlag.Bounds 1 关闭：
ShowFlag.Bounds 0 凡是 Show 命令能查看的参数，ShowFlag也能查看，包括Collision等。
如果想在游戏运行时查看指定物体的 Bounds，那么可以先执行 ShowFlag.Bounds 1，然后再以 Simulate 模式运行游戏，然后再在场景中单击要查看的物体，然后就可以显示该物体的 Bounds 信息。
 运行时命令 修改Camera Mode（切换摄像机视角）： Camera [modename] 其中modename的值为：
static const FName NAME_Fixed = FName(TEXT(&quot;Fixed&quot;));static const FName NAME_ThirdPerson = FName(TEXT(&quot;ThirdPerson&quot;));static const FName NAME_FreeCam = FName(TEXT(&quot;FreeCam&quot;));static const FName NAME_FreeCam_Default = FName(TEXT(&quot;FreeCam_Default&quot;));static const FName NAME_FirstPerson = FName(TEXT(&quot;FirstPerson&quot;)); 启用debug camera：">
<meta property="og:type" content="article">
<meta property="og:title" content="[UE4]console命令行常用命令(command)">
<meta name="twitter:title" content="[UE4]console命令行常用命令(command)">
<meta property="og:url" content="https://dawnarc.com/2016/05/ue4console%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4command/">
<meta property="twitter:url" content="https://dawnarc.com/2016/05/ue4console%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4command/">
<meta property="og:site_name" content="玄冬Wong">
<meta property="og:description" content="Editor命令（ShowFlag） 如果想在 Editor 中查看 Actor 蓝图的 Bounds（默认只能在 Static Mesh 编辑窗口中查看），可以使用 ShowFlag 命令（在编辑器窗口中按下波浪键打开输入窗口）。
开启：
ShowFlag.Bounds 1 关闭：
ShowFlag.Bounds 0 凡是 Show 命令能查看的参数，ShowFlag也能查看，包括Collision等。
如果想在游戏运行时查看指定物体的 Bounds，那么可以先执行 ShowFlag.Bounds 1，然后再以 Simulate 模式运行游戏，然后再在场景中单击要查看的物体，然后就可以显示该物体的 Bounds 信息。
 运行时命令 修改Camera Mode（切换摄像机视角）： Camera [modename] 其中modename的值为：
static const FName NAME_Fixed = FName(TEXT(&quot;Fixed&quot;));static const FName NAME_ThirdPerson = FName(TEXT(&quot;ThirdPerson&quot;));static const FName NAME_FreeCam = FName(TEXT(&quot;FreeCam&quot;));static const FName NAME_FreeCam_Default = FName(TEXT(&quot;FreeCam_Default&quot;));static const FName NAME_FirstPerson = FName(TEXT(&quot;FirstPerson&quot;)); 启用debug camera：">
<meta name="twitter:description" content="Editor命令（ShowFlag） 如果想在 Editor 中查看 Actor 蓝图的 Bounds（默认只能在 Static Mesh 编辑窗口中查看），可以使用 ShowFlag 命令（在编辑器窗口中按下波浪键打开输入窗口）。
开启：
ShowFlag.Bounds 1 关闭：
ShowFlag.Bounds 0 凡是 Show 命令能查看的参数，ShowFlag也能查看，包括Collision等。
如果想在游戏运行时查看指定物体的 Bounds，那么可以先执行 ShowFlag.Bounds 1，然后再以 Simulate 模式运行游戏，然后再在场景中单击要查看的物体，然后就可以显示该物体的 Bounds 信息。
 运行时命令 修改Camera Mode（切换摄像机视角）： Camera [modename] 其中modename的值为：
static const FName NAME_Fixed = FName(TEXT(&quot;Fixed&quot;));static const FName NAME_ThirdPerson = FName(TEXT(&quot;ThirdPerson&quot;));static const FName NAME_FreeCam = FName(TEXT(&quot;FreeCam&quot;));static const FName NAME_FreeCam_Default = FName(TEXT(&quot;FreeCam_Default&quot;));static const FName NAME_FirstPerson = FName(TEXT(&quot;FirstPerson&quot;)); 启用debug camera：">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2016-05-27T15:30:02">
  
  
    <meta property="article:modified_time" content="2016-05-27T15:30:02">
  
  
  
    
      <meta property="article:section" content="UnrealEngine4">
    
  
  
    
      <meta property="article:tag" content="console">
    
      <meta property="article:tag" content="UE4">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@dawn_arc">


  <meta name="twitter:creator" content="@dawn_arc">










  <meta property="og:image" content="https://www.gravatar.com/avatar/0df91cdac5811a56ca485b0449d91b5e?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/0df91cdac5811a56ca485b0449d91b5e?s=640">


    <title>[UE4]console命令行常用命令(command)</title>

    <link rel="icon" href="https://dawnarc.com/favicon.png">
    

    

    <link rel="canonical" href="https://dawnarc.com/2016/05/ue4console%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4command/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://dawnarc.com/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/solarized-light.min.css">
      
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-78064851-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://dawnarc.com/">玄冬Wong</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://dawnarc.com/#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/0df91cdac5811a56ca485b0449d91b5e?s=90" alt="Author&#39;s picture" />
      
    
    </a>
    
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://dawnarc.com/#about">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/0df91cdac5811a56ca485b0449d91b5e?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Neil Wang</h4>
        
          <h5 class="sidebar-profile-bio">久长唯有品格</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://dawnarc.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://stackoverflow.com/users/1645289/protoss" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
      
      <span class="sidebar-button-desc">Stack Overflow</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.facebook.com/koanland" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-facebook"></i>
      
      <span class="sidebar-button-desc">Facebook</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/dawnarc" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.instagram.com/dawn_arc/" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-instagram"></i>
      
      <span class="sidebar-button-desc">Instagram</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/dawnarc/" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">Linkedin</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.pinterest.com/wangaiguo/" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-pinterest"></i>
      
      <span class="sidebar-button-desc">Pinterest</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://steamcommunity.com/id/dawnarc" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-steam"></i>
      
      <span class="sidebar-button-desc">Steam</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/dawn_arc" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://weibo.com/koanland" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-weibo"></i>
      
      <span class="sidebar-button-desc">Weibo</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      [UE4]console命令行常用命令(command)
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2016-05-27T15:30:02&#43;08:00">
        
  
  
  
  
    Friday, 15:30, May 27, 2016
  

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://dawnarc.com/categories/unrealengine4">UnrealEngine4</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <h5 id="editor命令showflag">Editor命令（ShowFlag）</h5>
<p>如果想在 Editor 中查看 Actor 蓝图的 Bounds（默认只能在 Static Mesh 编辑窗口中查看），可以使用 ShowFlag 命令（在编辑器窗口中按下波浪键打开输入窗口）。</p>
<p>开启：</p>
<pre><code>ShowFlag.Bounds 1
</code></pre>
<p>关闭：</p>
<pre><code>ShowFlag.Bounds 0
</code></pre>
<p>凡是 Show 命令能查看的参数，ShowFlag也能查看，包括Collision等。</p>
<div class="alert success ">
  <p>如果想在游戏运行时查看指定物体的 Bounds，那么可以先执行 ShowFlag.Bounds 1，然后再以 Simulate 模式运行游戏，然后再在场景中单击要查看的物体，然后就可以显示该物体的 Bounds 信息。</p>
</div>
<h5 id="运行时命令">运行时命令</h5>
<p>修改Camera Mode（切换摄像机视角）：
Camera [modename]
其中modename的值为：</p>
<pre><code>static const FName NAME_Fixed = FName(TEXT(&quot;Fixed&quot;));
static const FName NAME_ThirdPerson = FName(TEXT(&quot;ThirdPerson&quot;));
static const FName NAME_FreeCam = FName(TEXT(&quot;FreeCam&quot;));
static const FName NAME_FreeCam_Default = FName(TEXT(&quot;FreeCam_Default&quot;));
static const FName NAME_FirstPerson = FName(TEXT(&quot;FirstPerson&quot;));
</code></pre>
<p>启用debug camera：</p>
<pre><code>ToggleDebugCamera
</code></pre>
<p>渲染优化分析视图模式：</p>
<pre><code>//Lit view mode shows the final result of your scene once all of the Materials and lighting have been applied. Hotkey: Alt + 4
viewmode lit

//Unlit view mode removes all lighting from the scene, showing you Base Color only. Hotkey: Alt + 3
viewmode unlit

//Wireframe shows all of the polygon edges in the scene. In the case of Brushes, you will see the resultant geometry. Hotkey: Alt + 2
viewmode wireframe

//Detail Lighting activates a neutral Material across the entire scene, using the normal maps of the original materials. This is useful for isolating whether your BaseColor is obscuring lighting by being too dark or noisy. Hotkey: Alt + 5
viewmode lit_detaillighting

//Lighting Only shows a neutral Material that is only affected by lighting. It differs from Detail Lighting mode in that you will not see normal maps. Hotkey: Alt + 6
viewmode lightingonly

//Light Complexity shows the number of non-static lights affecting your geometry. This is useful for tracking lighting cost - the more lights affecting a surface, the more expensive it will be to shade. Hotkey: Alt + 7
viewmode lightcomplexity

//Shader Complexity Mode is used to visualize the number of shader instructions being used to calculate each pixel of your scene. It is generally a good indication of how performance-friendly your scene will be. In general, it is used to test overall performance for your base scene, as well as to optimize particle effects, which tend to cause performance spikes with a large amount of overdraw for a short period of time. Hotkey: Alt + 8
viewmode shadercomplexity
</code></pre>
<p><a href="https://docs.unrealengine.com/4.26/en-US/BuildingWorlds/LevelEditor/Viewports/ViewModes/">https://docs.unrealengine.com/4.26/en-US/BuildingWorlds/LevelEditor/Viewports/ViewModes/</a></p>
<p>显示刚体</p>
<pre><code>Show Collision
</code></pre>
<p>显示帧率</p>
<pre><code>stat fps
</code></pre>
<p>显示mesh drawcall</p>
<pre><code>stat scenerendering
</code></pre>
<p>显示UMG Widget drawcall</p>
<pre><code>stat slate
</code></pre>
<p>显示三角面数量</p>
<pre><code>stat Engine
</code></pre>
<p>显示单帧信息：总时长、Game耗时、Draw耗时、GPU耗时</p>
<pre><code>stat Unit
stat UnitGraph  //附带各个参数的实时曲线图
</code></pre>
<p>显示当前帧的CPU时间信息（各种Tick, GC Mark，Update Overlaps等）：</p>
<pre><code>stat game
</code></pre>
<p>设置渲染分辨率为默认大小的50%（500就表示实际viewport大小的5倍尺寸来渲染，可以用来做压力测试）</p>
<pre><code>r.ScreenPercentage 50
</code></pre>
<p>查看遮挡剔除：</p>
<pre><code>r.visualizeOccludedPrimitives 1
</code></pre>
<p>关闭或开启屏幕上打印信息（AddOnScreenDebugMessage）</p>
<pre><code>DisableAllScreenMessages

EnableAllScreenMessages
</code></pre>
<p>Viewport高清截图</p>
<pre><code>//以当前viewport分辨率的两倍进行截图
HighResShot 2

//指定分辨率截图
HighResShot 3840x2160
</code></pre>
<p>图片存储位置：<code>\Saved\Screenshots\</code></p>
<p>Taking Screenshots<br>
<a href="https://docs.unrealengine.com/en-US/Engine/Basics/Screenshots/index.html">https://docs.unrealengine.com/en-US/Engine/Basics/Screenshots/index.html</a></p>
<h5 id="dump-console-commands">Dump Console Commands</h5>
<p>Q：console的命令非常多，如何将所有命令全部dump出一个列表？<br>
A：使用命令<code>dumpconsolecommands</code>，执行后，所有可用的命令会存储在<code>\Saved\Logs\</code>下的log文件中。</p>
<p>参考自：Where can I find all the console commands?<br>
<a href="https://answers.unrealengine.com/questions/255772/where-can-i-find-all-the-console-commands.html">https://answers.unrealengine.com/questions/255772/where-can-i-find-all-the-console-commands.html</a></p>
<p>或者直接查看引擎源码：<br>
Engine\Source\Runtime\Engine\Private\UnrealEngine.cpp</p>
<pre><code>bool UEngine::Exec( UWorld* InWorld, const TCHAR* Cmd, FOutputDevice&amp; Ar )
</code></pre>
<h5 id="性能统计图工具-session-frontend">性能统计图工具 Session Frontend</h5>
<p>用于记录某段时间内的性能分析数据。</p>
<p>在需要开始统计的时刻执行：</p>
<pre><code>stat startfile
</code></pre>
<p>在统计完成的时刻执行：</p>
<pre><code>stat stopfile
</code></pre>
<p>此时会在路径 <code>Saved/Profiling/UnrealStats</code> 下生成数据文件。<br>
然后点击：Windows -》 Developer Tools -》 Session Frontend -》点击 Profiler 选项卡 -》 点击 Load 按钮，载入前面生成的数据文件。</p>
<div class="alert warning ">
  <p>性能统计自身也会消耗一定性能，有没办法将性能统计的自身消耗，从性能统计的计算结果中排除掉？答案是：No！至少目前版本不支持。</p>
</div>
<h3 id="gpuprofile-与-cpuprofile">GPUProfile 与 CPUProfile</h3>
<h5 id="cpu卡顿分析">CPU卡顿分析</h5>
<p>记录卡顿时间（通过<code>t.HitchThreshold</code>定义卡顿时长阀值）</p>
<pre><code>stat Hitches    //或者stat DumpHitches 记录log文件
</code></pre>
<p>程序运行时一旦某帧耗时超过<code>t.HitchThreshold</code>指定的时长，则函数堆栈就会被打印出来。例如，以下 hitchdump 显示LoadObject耗时较长（<code>Self</code>表示函数堆栈中上一级函数，即<code>LoadObject</code>，所占用耗时），则表示是加载资源导致顿卡</p>
<pre><code>   477.514ms (   4)  -  Thread_4118_0 - GameThread - STATGROUP_Threads - STATCAT_Advanced
     477.510ms (   2)  -  FrameTime - STAT_FrameTime - STATGROUP_Engine - STATCAT_Advanced
       470.844ms (   1)  -  FrameTime - STAT_FrameTime - STATGROUP_Engine - STATCAT_Advanced
         470.840ms (   1)  -  World Tick Time - STAT_WorldTickTime - STATGROUP_Game - STATCAT_Advanced
           470.758ms (   5)  -  Tick Time - STAT_TickTime - STATGROUP_Game - STATCAT_Advanced
             470.590ms (   2)  -  TG_PrePhysics - STAT_TG_PrePhysics - STATGROUP_TickGroups - STATCAT_Advanced
               470.585ms (   2)  -  ReleaseTickGroup Block - STAT_ReleaseTickGroup_Block - STATGROUP_TickGroups - STATCAT_Advanced
                 470.579ms (   1)  -  Game TaskGraph Tasks - STAT_TaskGraph_GameTasks - STATGROUP_Threading - STATCAT_Advanced
                   470.512ms (  20)  -  FTickFunctionTask - STATGROUP_TaskGraphTasks - STATCAT_Advanced
                     470.309ms (   1)  -  BaseGameMode/Game/Map/PVP/UEDPIE_0_PVP.PVP.PersistentLevel.BaseGameMode - STATGROUP_UObjects - STATCAT_Advanced
                       469.638ms (   3)  -  LoadObject - STAT_LoadObject - STATGROUP_Object - STATCAT_Advanced
                         377.887ms (   3)  -  Self
                         26.688ms ( 533)  -  STAT_FArchiveAsync2_WaitRead - STATGROUP_Quick - STATCAT_Advanced
</code></pre>
<h5 id="gpu卡顿分析">GPU卡顿分析</h5>
<p>在编辑器中运行游戏时，按下 Ctrl + Shift + 逗号，或者命令行输入：<code>profilegpu</code> ，打开 GPUProfile 面板，显示当前帧的各类计算的耗时：PostProcess、Lighting 等。<br>
注意：是当前一帧的耗时，不是平均每帧的耗时。</p>
<p>另外一个类似命令:<code>profilegpuhitches</code>，表示每当GPU有卡顿时，自动弹出一个当时所在帧的 GPUProfile 面板。</p>
<p>GPUProfile面板上的可视化信息，在log文件（<code>工程名\Saved\Logs\工程名.log</code>）里面也会以文本形式打印出来。<br>
在Development 打包模式下，由于无法打开GPUProfile 面板，所以分析数据只打印在log里，例如：</p>
<pre><code>[2018.08.26-07.56.40:320][291]Profiling the next GPU frame
[2018.08.26-07.56.40:406][294]LogD3D11RHI: Warning: 
[2018.08.26-07.56.40:406][294]LogD3D11RHI: Warning: 
[2018.08.26-07.56.40:411][295]LogRHI: Perf marker hierarchy, total GPU time 4.33ms
[2018.08.26-07.56.40:411][295]LogRHI: Warning: Profiled range was continuous.
[2018.08.26-07.56.40:412][295]LogRHI: 100.0% 4.33ms   FRAME 635 draws 16087 prims 18018 verts
[2018.08.26-07.56.40:412][295]LogRHI: 97.1% 4.20ms   Scene 633 draws 15751 prims 17346 verts
[2018.08.26-07.56.40:412][295]LogRHI:     1.1% 0.05ms   PrePass DDM_AllOpaque (Forced by DBuffer) 141 draws 5744 prims 5634 verts
[2018.08.26-07.56.40:412][295]LogRHI:        0.3% 0.01ms   BeginRenderingPrePass 1 draws 0 prims 0 verts
[2018.08.26-07.56.40:412][295]LogRHI:     0.5% 0.02ms   ComputeLightGrid 5 draws 5 prims 0 verts
[2018.08.26-07.56.40:412][295]LogRHI:        0.3% 0.01ms   CullLights 30x17x32 NumLights 0 NumCaptures 1 4 draws 4 prims 0 verts
[2018.08.26-07.56.40:412][295]LogRHI:        0.2% 0.01ms   Compact 1 draws 1 prims 0 verts
[2018.08.26-07.56.40:412][295]LogRHI:     0.1% 0.00ms   BeginOcclusionTests 16 draws 192 prims 128 verts
[2018.08.26-07.56.40:412][295]LogRHI:        0.1% 0.00ms   ViewOcclusionTests 0 16 draws 192 prims 128 verts
[2018.08.26-07.56.40:412][295]LogRHI:           0.1% 0.00ms   IndividualQueries 16 draws 192 prims 128 verts
</code></pre>
<h5 id="其他cpu性能分析">其他CPU性能分析</h5>
<p>CPU性能分析可以通过 <code>stat scenerendering</code> 、<code>stat game</code> 等命令分析，如果某类型的 draw call 数量特别高，说明这是 CPU 的瓶颈所在。</p>
<div class="alert danger ">
  <p>如果是在编辑器模式，建议以“新窗口”(New Editor Window)PIE模式运行，如果是在编辑器的Viewport中运行，会把编辑器的消耗也算进去（即使是全屏模式）。</p>
</div>
<p>CPU Profiling<br>
<a href="https://docs.unrealengine.com/en-us/Engine/Performance/CPU">https://docs.unrealengine.com/en-us/Engine/Performance/CPU</a></p>
<p>GPU Profiling<br>
<a href="https://docs.unrealengine.com/en-us/Engine/Performance/GPU">https://docs.unrealengine.com/en-us/Engine/Performance/GPU</a></p>
<h3 id="misc">Misc</h3>
<h5 id="工程设置相关">工程设置相关</h5>
<div class="alert warning ">
  <p>使用stat相关命令检测性能时，需要关闭Smooth Frame Rate来保证检测结果更精准：<br>
Project Settings -&gt; Engine -&gt; General Settings -&gt; Framerate -&gt; Uncheck <code>Smooth Frame Rate</code>。</p>
</div>
<h5 id="运行时期间用c执行console命名">运行时期间用C++执行console命名</h5>
<pre><code>UKismetSystemLibrary::ExecuteConsoleCommand(UObject* WorldContextObject, 
    const FString&amp; Command, class APlayerController* SpecificPlayer = NULL )
</code></pre>
<h5 id="运行时期间修改画质级别">运行时期间修改画质级别</h5>
<p>Unreal Engine 4 Save and Load Graphics Settings using Blueprints Tutorial<br>
<a href="https://www.youtube.com/watch?v=5AXA2CrPwTo">https://www.youtube.com/watch?v=5AXA2CrPwTo</a></p>
<p>Change Graphics Settings In-Game - Unreal Engine 4 Tutorial<br>
<a href="https://www.youtube.com/watch?v=T90vqA9x5so">https://www.youtube.com/watch?v=T90vqA9x5so</a></p>
<p>Command:</p>
<pre><code>r.PostProcessAAQuality 0
 
sg.PostProcessQuality 0
 
sg.ShadowQuality 0

sg.TextureQuality 0

sg.EffectsQuality 0

r.DetailMode 0

foliage.DensityScale 0.25
grass.DensityScale 0.25
</code></pre>
<p>Scalability Reference<br>
<a href="https://docs.unrealengine.com/en-us/Engine/Performance/Scalability/ScalabilityReference">https://docs.unrealengine.com/en-us/Engine/Performance/Scalability/ScalabilityReference</a></p>
<div class="alert success ">
  <p>蓝图<code>Execute Console Command</code>节点（C++接口：<code>UKismetSystemLibrary::ExecuteConsoleCommand()</code>）在 Shipping 模式下仍然有效。</p>
</div>
<p>移动端修改画质级别（安卓为例）：</p>
<pre><code>\Engine\Config\Android\AndroidScalability.ini
</code></pre>
<p>程序启动时自动设置画质级别的位置：<br>
Engine\Source\Runtime\Engine\Private\DeviceProfiles\DeviceProfileManager.cpp</p>
<pre><code>    /**
     * Startup and select the active device profile
     * Then Init the CVars from this profile and it's Device profile parent tree.
     */
    static void InitializeCVarsForActiveDeviceProfile(bool bPushSettings=false, bool bForceDeviceProfilePriority = false);
</code></pre>
<p>手动检测硬件配置详情并自动设置画质级别：<br>
console命令</p>
<pre><code>//此命令同时会将硬件性能信息打印到文本log
scalability auto
</code></pre>
<p>C++ API</p>
<pre><code>if(UGameUserSettings* GameUserSettings = UGameUserSettings::GetGameUserSettings())
{
    GameUserSettings-&gt;RunHardwareBenchmark();
    GameUserSettings-&gt;ApplyHardwareBenchmarkResults();
}
</code></pre>
<p>获取硬件（CPU、GPU）跑分：</p>
<pre><code>const Scalability::FQualityLevels State = Scalability::BenchmarkQualityLevels();
const float CPUIndex = State.CPUBenchmarkResults;
const float GPUIndex = State.GPUBenchmarkResults;
</code></pre>
<p>Engine\Config\BaseScalability.ini</p>
<pre><code>[ScalabilitySettings]
; PerfIndexThresholds define the thresholds that determine what the autodetected quality should be for each group.
; When you auto detect performance, both a CPUIndex and GPUIndex are calculated on the machine.
; Use the console command &quot;scalability auto&quot; to print these values for a machine.
; The type of perfindex used to determine the quality for a group is either the GPU, CPU or Min.
; GPU means the quality is based on the speed of the graphics card. CPU means the quality is based on the processor, and Min means the group quality is based on the slower of either the CPU or GPU.
; Each group has a type followed by three numbers.
; The first number is the perfindex threshold that changes quality from 0 to 1. The second is the threshold from 1 to 2, the third is the threshold from 2 to 3.
PerfIndexThresholds_ResolutionQuality=&quot;GPU 18 42 115&quot;
PerfIndexThresholds_ViewDistanceQuality=&quot;Min 18 42 105&quot;
PerfIndexThresholds_AntiAliasingQuality=&quot;GPU 18 42 115&quot;
PerfIndexThresholds_ShadowQuality=&quot;Min 18 42 105&quot;
PerfIndexThresholds_PostProcessQuality=&quot;GPU 18 42 115&quot;
PerfIndexThresholds_TextureQuality=&quot;GPU 18 42 115&quot;
PerfIndexThresholds_EffectsQuality=&quot;Min 18 42 105&quot;
PerfIndexThresholds_FoliageQuality=&quot;GPU 18 42 115&quot;
PerfIndexThresholds_ShadingQuality=&quot;GPU 18 42 115&quot;

; This is the screen percentage for the resolution quality, corresponding to 25% pixels, 50% pixels, 75% pixels, and 100% pixels
PerfIndexValues_ResolutionQuality=&quot;50 71 87 100 100&quot;
</code></pre>
<p>输出的文本信息：</p>
<pre><code>Cmd: scalability auto
LogSynthBenchmark: Display: FSynthBenchmark (V0.95):  requested WorkScale=10.00
LogSynthBenchmark: Display: ===============
LogSynthBenchmark: Display: Main Processor:
LogSynthBenchmark: Display:          ... 0.049066 s/Run 'RayIntersect'
LogSynthBenchmark: Display:          ... 0.030856 s/Run 'Fractal'
LogSynthBenchmark: Display: 
LogSynthBenchmark: Display:   CompiledTarget_x_Bits: 64
LogSynthBenchmark: Display:   UE_BUILD_SHIPPING: 0
LogSynthBenchmark: Display:   UE_BUILD_TEST: 0
LogSynthBenchmark: Display:   UE_BUILD_DEBUG: 0
LogSynthBenchmark: Display:   TotalPhysicalGBRam: 32
LogSynthBenchmark: Display:   NumberOfCores (physical): 8
LogSynthBenchmark: Display:   NumberOfCores (logical): 8
LogSynthBenchmark: Display:   CPU Perf Index 0: 52.2 (weight 1.00)
LogSynthBenchmark: Display:   CPU Perf Index 1: 92.7 (weight 1.50)
LogSynthBenchmark: Display:  
LogSynthBenchmark: Display: Graphics:
LogSynthBenchmark: Display:   Adapter Name: 'Radeon RX 470 Series'
LogSynthBenchmark: Display:   (On Optimus the name might be wrong, memory should be ok)
LogSynthBenchmark: Display:   Vendor Id: 0x1002
LogSynthBenchmark: Display:   Device Id: 0x67DF
LogSynthBenchmark: Display:   Device Revision: 0xFF
LogSynthBenchmark: Display:   GPU Memory: 4076/0/16351 MB
LogSynthBenchmark: Display:   GPU first test: 0.05s
LogSynthBenchmark: Display:          ... 7.508 s/GigaPix, Confidence=89% 'ALUHeavyNoise' (likely to be very inaccurate)
LogSynthBenchmark: Display:          ... 5.685 s/GigaPix, Confidence=89% 'TexHeavy' (likely to be very inaccurate)
LogSynthBenchmark: Display:          ... 5.209 s/GigaPix, Confidence=89% 'DepTexHeavy' (likely to be very inaccurate)
LogSynthBenchmark: Display:          ... 15.020 s/GigaPix, Confidence=40% 'FillOnly' (likely to be very inaccurate)
LogSynthBenchmark: Display:          ... 0.629 s/GigaPix, Confidence=100% 'Bandwidth' (likely to be very inaccurate)
LogSynthBenchmark: Display:          ... 2.354 s/GigaVert, Confidence=51% 'VertThroughPut1' (likely to be very inaccurate)
LogSynthBenchmark: Display:          ... 4.441 s/GigaVert, Confidence=100% 'VertThroughPut2' (likely to be very inaccurate)
LogSynthBenchmark: Display:   GPU second test: 0.29s
LogSynthBenchmark: Display:          ... 11.496 s/GigaPix, Confidence=70% 'ALUHeavyNoise' (likely to be inaccurate)
LogSynthBenchmark: Display:          ... 8.107 s/GigaPix, Confidence=89% 'TexHeavy' (likely to be inaccurate)
LogSynthBenchmark: Display:          ... 7.910 s/GigaPix, Confidence=100% 'DepTexHeavy' (likely to be inaccurate)
LogSynthBenchmark: Display:          ... 32.663 s/GigaPix, Confidence=100% 'FillOnly' (likely to be inaccurate)
LogSynthBenchmark: Display:          ... 0.672 s/GigaPix, Confidence=100% 'Bandwidth' (likely to be inaccurate)
LogSynthBenchmark: Display:          ... 2.340 s/GigaVert, Confidence=100% 'VertThroughPut1' (likely to be inaccurate)
LogSynthBenchmark: Display:          ... 4.447 s/GigaVert, Confidence=100% 'VertThroughPut2' (likely to be inaccurate)
LogSynthBenchmark: Display:   GPU Final Results:
LogSynthBenchmark: Display:          ... 11.496 s/GigaPix, Confidence=70% 'ALUHeavyNoise'
LogSynthBenchmark: Display:          ... 8.107 s/GigaPix, Confidence=89% 'TexHeavy'
LogSynthBenchmark: Display:          ... 7.910 s/GigaPix, Confidence=100% 'DepTexHeavy'
LogSynthBenchmark: Display:          ... 32.663 s/GigaPix, Confidence=100% 'FillOnly'
LogSynthBenchmark: Display:          ... 0.672 s/GigaPix, Confidence=100% 'Bandwidth'
LogSynthBenchmark: Display:          ... 2.340 s/GigaVert, Confidence=100% 'VertThroughPut1'
LogSynthBenchmark: Display:          ... 4.447 s/GigaVert, Confidence=100% 'VertThroughPut2'
LogSynthBenchmark: Display: 
LogSynthBenchmark: Display:   GPU Perf Index 0: 249.9 (weight 1.00)
LogSynthBenchmark: Display:   GPU Perf Index 1: 108.9 (weight 0.10)
LogSynthBenchmark: Display:   GPU Perf Index 2: 205.6 (weight 0.10)
LogSynthBenchmark: Display:   GPU Perf Index 3: 128.3 (weight 3.00)
LogSynthBenchmark: Display:   GPU Perf Index 4: 62.7 (weight 1.00)
LogSynthBenchmark: Display:   GPU Perf Index 5: 152.2 (weight 0.00)
LogSynthBenchmark: Display:   GPU Perf Index 6: 251.7 (weight 0.00)
LogSynthBenchmark: Display:   GPUIndex: 140.2
LogSynthBenchmark: Display:   CPUIndex: 76.5
LogSynthBenchmark: Display: 
LogSynthBenchmark: Display:          ... Total Time: 2.228119 sec
</code></pre>
<p>Auto-detect Optimal Graphics Settings for Unreal<br>
<a href="https://www.tomlooman.com/auto-detect-graphics-settings-ue4/">https://www.tomlooman.com/auto-detect-graphics-settings-ue4/</a></p>
<div class="alert warning ">
  <p><code>GameUserSettings-&gt;RunHardwareBenchmark();</code>和<code>Scalability::BenchmarkQualityLevels();</code>只在主机和PC上有效。移动端忽高忽低不准确，可能受温度影响较大。</p>
</div>
<h5 id="贴图相关命令">贴图相关命令</h5>
<p>设置贴图的尺寸级别（精度），<span class="highlight-text red">前提是贴图已经生成了LOD（即mipmap） </span></p>
<pre><code>r.mipmaplodbias 0
</code></pre>
<h5 id="查询命令的参数值">查询命令的参数值</h5>
<p>C++ 或者 蓝图中使用查询函数</p>
<pre><code>float UKismetSystemLibrary::GetConsoleVariableFloatValue(UObject* WorldContextObject, const FString&amp; VariableName)

int32 UKismetSystemLibrary::GetConsoleVariableIntValue(UObject* WorldContextObject, const FString&amp; VariableName)
</code></pre>
<p>例如：</p>
<p>先在命令行执行</p>
<pre><code>r.ScreenPercentage 200
</code></pre>
<p>然后通过蓝图或者C++查询</p>
<pre><code>float RetVal = KismetSystemLibrary::GetConsoleVariableIntValue(this, TEXT(&quot;r.ScreenPercentage&quot;));
//RetVal is 200.f
</code></pre>
<h3 id="官方文档">官方文档</h3>
<h5 id="commands">Commands</h5>
<p>Stat Commands<br>
<a href="https://docs-origin.unrealengine.com/latest/INT/Engine/Performance/StatCommands/">https://docs-origin.unrealengine.com/latest/INT/Engine/Performance/StatCommands/</a></p>
<p>Unreal Engine 4 Console Variables and Commands<br>
<a href="https://digilander.libero.it/ZioYuri78/">https://digilander.libero.it/ZioYuri78/</a></p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://dawnarc.com/tags/console/">console</a>

  <a class="tag tag--primary tag--small" href="https://dawnarc.com/tags/ue4/">UE4</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://dawnarc.com/2016/05/hexoserver%E5%90%AF%E5%8A%A8%E5%BC%82%E5%B8%B8yamlexception/" data-tooltip="[hexo]server启动异常：YAMLException">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://dawnarc.com/2016/05/nginx%E5%AE%89%E8%A3%85%E7%AE%80%E7%95%A5%E6%AD%A5%E9%AA%A4/" data-tooltip="Nginx安装简略步骤">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            <div class="article-container"></div>
            <script src="https://utteranc.es/client.js"
  repo="dawnarc/dawnarc.github.io"
  issue-term="pathname"
  label="Comment"
  theme="github-light"
  crossorigin="anonymous"
  async>
</script>
            </div>
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2021 Neil Wang. All Rights Reserved. Powered by <A href="https://gohugo.io/"> Hugo</A> | Theme created by <A href="https://github.com/kakawait/hugo-tranquilpeak-theme/"> Tranquilpeak</A>.
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://dawnarc.com/2016/05/hexoserver%E5%90%AF%E5%8A%A8%E5%BC%82%E5%B8%B8yamlexception/" data-tooltip="[hexo]server启动异常：YAMLException">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://dawnarc.com/2016/05/nginx%E5%AE%89%E8%A3%85%E7%AE%80%E7%95%A5%E6%AD%A5%E9%AA%A4/" data-tooltip="Nginx安装简略步骤">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/0df91cdac5811a56ca485b0449d91b5e?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Neil Wang</h4>
    
      <div id="about-card-bio">久长唯有品格</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        To be Marvelous
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Yichang·Hubei
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://dawnarc.com/cover-v1.2.0.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

	<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/solarized-light.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://dawnarc.com/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  






    
  </body>
</html>

